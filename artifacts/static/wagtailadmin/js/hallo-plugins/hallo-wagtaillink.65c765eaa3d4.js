!function(){"use strict";var e={34827:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var r=o(n(73609));r.default.widget("IKS.hallowagtaillink",{options:{uuid:"",editable:null},populateToolbar:function(e){var t=this,n=function(){var e=t.options.editable.getSelection().commonAncestorContainer;return r.default(e).parents("a").get(0)},o=r.default('<span class="'+this.widgetName+'"></span>'),i=r.default("<span></span>");(i=i.hallobutton({uuid:t.options.uuid,editable:t.options.editable,label:"Add/Edit Link",icon:"icon-link",command:null,queryState:function(){return i.hallobutton("checked",!!n())}})).on("click",(function(){var e,o,i=window.chooserUrls.pageChooser,a={allow_external_link:!0,allow_email_link:!0,allow_phone_link:!0,allow_anchor_link:!0},l=n(),u=t.options.editable.getSelection();return l?(e=l.getAttribute("href"),parentPageId=l.getAttribute("data-parent-id"),o=l.getAttribute("data-linktype"),a.link_text=l.innerText,"page"===o&&parentPageId?i=window.chooserUrls.pageChooser+parentPageId.toString()+"/":e.startsWith("mailto:")?(i=window.chooserUrls.emailLinkChooser,e=e.replace("mailto:",""),a.link_url=e):e.startsWith("tel:")?(i=window.chooserUrls.phoneLinkChooser,e=e.replace("tel:",""),a.link_url=e):e.startsWith("#")?(i=window.chooserUrls.anchorLinkChooser,e=e.replace("#",""),a.link_url=e):o||(i=window.chooserUrls.externalLinkChooser,a.link_url=e)):u.collapsed||(a.link_text=u.toString()),ModalWorkflow({url:i,urlParams:a,onload:PAGE_CHOOSER_MODAL_ONLOAD_HANDLERS,responses:{pageChosen:function(e){var n,o;return l?(n=l,o=!0):u.collapsed?(n=document.createElement("a"),u.insertNode(n),o=!1):(n=document.createElement("a"),u.surroundContents(n),r.default("a[href]",n).each((function(){for(var e=this.parentNode;this.firstChild;)e.insertBefore(this.firstChild,this);e.removeChild(this)})),o=!0),n.setAttribute("href",e.url),e.id?(n.setAttribute("data-id",e.id),n.setAttribute("data-parent-id",e.parentId),n.setAttribute("data-linktype","page")):(n.removeAttribute("data-id"),n.removeAttribute("data-parent-id"),n.removeAttribute("data-linktype")),!e.prefer_this_title_as_link_text&&o||(n.innerText=e.title),t.options.editable.element.trigger("change")}}})})),o.append(i);var a=r.default("<span></span>");(a=a.hallobutton({uuid:t.options.uuid,editable:t.options.editable,label:"Remove Link",icon:"icon-chain-broken",command:null,queryState:function(){return n()?a.hallobutton("enable"):a.hallobutton("disable")}})).on("click",(function(){var e,o;n()&&((o=(e=rangy.getSelection()).getRangeAt(0)).setStartBefore(e.anchorNode.parentNode),o.setEndAfter(e.anchorNode.parentNode),e.setSingleRange(o,!1),document.execCommand("unlink"),t.options.editable.element.trigger("change"))})),o.append(a),o.hallobuttonset(),e.append(o)}})},73609:function(e){e.exports=jQuery}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.x=function(){},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=846,function(){var e={846:0},t=[[34827,751],[90971,751]],o=function(){},r=function(r,i){for(var a,l,u=i[0],s=i[1],d=i[2],c=i[3],p=0,h=[];p<u.length;p++)l=u[p],n.o(e,l)&&e[l]&&h.push(e[l][0]),e[l]=0;for(a in s)n.o(s,a)&&(n.m[a]=s[a]);for(d&&d(n),r&&r(i);h.length;)h.shift()();return c&&t.push.apply(t,c),o()},i=self.webpackChunkwagtail=self.webpackChunkwagtail||[];function a(){for(var o,r=0;r<t.length;r++){for(var i=t[r],a=!0,l=1;l<i.length;l++){var u=i[l];0!==e[u]&&(a=!1)}a&&(t.splice(r--,1),o=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=function(){}),o}i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i));var l=n.x;n.x=function(){return n.x=l||function(){},(o=a)()}}(),n.x()}();
//# sourceMappingURL=hallo-wagtaillink.js.map